{"version":3,"sources":["webpack:///src/app/calls-contact/calls-contact.page.ts","webpack:///src/app/calls-contact/calls-contact-routing.module.ts","webpack:///src/app/calls-contact/calls-contact.module.ts","webpack:///src/app/calls-contact/calls-contact.page.html","webpack:///src/app/calls-contact/calls-contact.page.scss"],"names":["CallsContactPage","http","storage","route","router","webRTC","elRef","media","navCtrl","topVideoFrame","MianDiv","AudioDiv","calheader","incmng","outgng","ring","create","ringtone","busytone","ObservableVar","interval","subscribe","CheckCallStatus","params","val","get","then","udetails","userDetails","user_id","id","console","log","user_mobile","mobile","ApiUrl","Response","contacts","cntlength","length","incval","incomming","partnerId","caller_mobile","callId","setVolume","play","setAudioMode","mode","i","StartCall","myEl","nativeElement","querySelector","muted","partnerEl","init","mycall","setTimeout","call","close","Endcall","navigate","pid","ResponseData","calval","callstatus","ringer","setInterval","clearInterval","callEnd","callend","ans_status","Cstat","Status","status","Ans_Status","Changeudio","unsubscribe","selector","template","routes","path","component","CallsContactPageRoutingModule","imports","forChild","exports","CallsContactPageModule","declarations"],"mappings":"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","file":"calls-contact-calls-contact-module-es5.js","sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Component, ElementRef, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Storage } from '@ionic/storage-angular';\nimport { AppComponent } from '../app.component';\nimport { AudiowebrtcService } from '../providers/audiowebrtc.service';\nimport { Observable } from \"rxjs/rx\";\nimport { Subscription } from 'rxjs/Subscription';\nimport { Media, MediaObject } from '@ionic-native/media/ngx';\nimport { NavController } from '@ionic/angular';\nimport { NavigationExtras } from '@angular/router';\nimport { AudioToggle } from 'capacitor-audio-toggle'\n@Component({\n  selector: 'app-calls-contact',\n  templateUrl: './calls-contact.page.html',\n  styleUrls: ['./calls-contact.page.scss'],\n})\nexport class CallsContactPage implements OnInit {\n  ObservableVar: Subscription;\n  topVideoFrame = 'partner-video';\n  userId: string;\n  partnerId: string;\n  myEl: HTMLMediaElement;\n  partnerEl: HTMLMediaElement;\n  user_id: any;\n  userDetails: any;\n  user_mobile: any;\n  contacts: any;\n  cntlength: any;\n  ring: MediaObject;\n  ringtone: MediaObject;\n  busytone: MediaObject;\n  MianDiv:any=true;\n  AudioDiv:any=false;\n  incomming: any;\n  callId: any;\n  calheader:any=true;\n  incmng: any=false;\n  outgng:any = true;\n  calls: any;\n  Endcall: any;\n  ResponseData: any;\n  callstatus: any;\n  ans_status: any;\n  Cstat: any;\n  Status: any;\n  Ans_Status: any;\n  constructor(\n    private http : HttpClient,\n    private storage: Storage,\n    private route:Router,\n    private router:ActivatedRoute,\n    public webRTC: AudiowebrtcService,\n    public elRef: ElementRef,\n    private media : Media,\n    public navCtrl: NavController,\n  ) { \n    this.ring = this.media.create('https://topiko.com/ringtones/ring.mp3');\n    this.ringtone = this.media.create('https://topiko.com/ringtones/ringtone.mp3');\n    this.busytone = this.media.create('https://topiko.com/ringtones/busy.mp3')\n\n    this.ObservableVar = Observable.interval(2000).subscribe(()=>{ \n      this.CheckCallStatus();\n    });\n  }\n\n  ngOnInit() {\n    this.router.params.subscribe(val=>{\n      this.storage.get('userdetails').then((udetails)=>{\n        this.userDetails = udetails\n        this.user_id = this.userDetails[0].id;\n        console.log(this.user_id,'User ID');\n        this.user_mobile = this.userDetails[0].mobile;\n        this.http.get(AppComponent.ApiUrl+\"getcontacts.php?user_id=\"+this.user_id).subscribe(Response =>\n          {\n            this.contacts = Response;\n            this.cntlength = this.contacts.length;\n            console.log(\"contacts\",Response);\n          });\n          this.http.get(AppComponent.ApiUrl+\"checkincomming.php?user_mobile=\"+this.user_mobile).subscribe((incval)=>{\n            this.incomming = incval;\n            console.log(\"calls Pge Inoming Staus\", this.incomming)\n            if(this.incomming !=0){\n              this.partnerId=this.incomming[0].caller_mobile;\n              this.callId = this.incomming[0].id;\n            console.log(\"Incoming call details are:\",this.incomming);\n            this.ringtone.setVolume(1);\n            this.ringtone.play();\n            this.calheader=false;\n                  this.MianDiv=false;\n                  this.AudioDiv=true;\n                  this.incmng=true;\n                  this.outgng = false;\n            }\n      });\n    });\n  });\n  \n}\nChangeudio(){\n  AudioToggle.setAudioMode({mode:'earpiece'});\n }\naudiocall(i){\n    this.partnerId=this.contacts[i].mobile;\n  this.StartCall(this.partnerId)\n  this.calheader=false;\n  this.MianDiv=false;\n  this.AudioDiv=true;\n  \n  this.myEl = this.elRef.nativeElement.querySelector('#my-video');\n  this.myEl.muted=true;\n  this.partnerEl = this.elRef.nativeElement.querySelector('#partner-video');\n  this.webRTC.init(this.user_mobile, this.myEl, this.partnerEl);\n  let mycall = this;\n  setTimeout(function(){ \n    mycall.call();},5000)\n  }\n  \n\n  call(){\n    console.log(\"call connected\", this.partnerId);\n    this.webRTC.call(this.partnerId);\n  }\n  callend(){\n   \n    this.calheader=true;\n    this.AudioDiv=false;\n    this.MianDiv=true;\n    this.ring.setVolume(0);\n    this.ringtone.setVolume(0);\n    this.busytone.setVolume(0);\n    this.webRTC.close();\n    this.http.get(AppComponent.ApiUrl+\"endcall.php?call_id=\"+this.callId+\"&record=\"+this.partnerId+\"CallRecord.mp3\").subscribe((Endcall)=>{\n      this.Endcall = Endcall;\n      if(this.Endcall==1){\n        this.route.navigate(['/calls']);\n      }\n    }) \n  }\n\n\n  // Clling Server Functions\n\n\n  //start Call\n  StartCall(pid){\n    this.http.get(AppComponent.ApiUrl+\"startcall.php?user_mobile=\"+this.user_mobile+\"&calee_mobile=\"+pid+\"&call_type=audio\").subscribe((ResponseData)=>{\n      this.ResponseData =ResponseData\n      console.log(\"Call Response Data:\", this.ResponseData)\n      if(this.ResponseData!=0){\n       this.callId = this.ResponseData;\n       this.http.get(AppComponent.ApiUrl+\"callstatus.php?calee_moble=\"+pid).subscribe((calval)=>{\n         this.callstatus = calval;\n         if(this.callstatus==0){\n          this.ring = this.media.create('https://topiko.com/ringtones/ring.mp3');\n          console.log(this.ring);\n          this.ring.setVolume(1);\n          this.ring.play();\n          let ringer = this\n          setInterval(function(){\n            ringer.ring.play();\n          },2000);\n          setTimeout(() => {\n            clearInterval();\n          }, 10000);\n\n          \n         }\n         else{\n          this.busytone = this.media.create('https://topiko.com/ringtones/busy.mp3')\n           this.busytone.setVolume(1);\n           this.busytone.play();\n           let callEnd =this;\n           setTimeout(function(){\n            callEnd.callend();\n           },8000);\n         }\n       })\n      }\n    })\n    }\n  // Strat call code EndsHere\n\n  // Answer Call code\n\n  AnsCall(){\n  console.log(\"Call_id\", this.incomming[0].id);\n  this.ringtone.setVolume(0);\n  this.incmng=false;\n  this.outgng = true;\n  this.http.get(AppComponent.ApiUrl+\"answerstatus.php?call_id=\"+this.incomming[0].id).subscribe((ans_status)=>{\n    this.ans_status = ans_status;\n    if(this.ans_status==1){\n      console.log(\"Call answered\");\n      this.partnerId = this.incomming[0].caller_mobile; \n      this.calheader=false;\n      this.MianDiv=false;\n      this.AudioDiv=true;\n      this.myEl = this.elRef.nativeElement.querySelector('#my-video');\n      this.myEl.muted=true;\n      this.partnerEl = this.elRef.nativeElement.querySelector('#partner-video');\n      this.webRTC.init(this.user_mobile, this.myEl, this.partnerEl);\n      let mycall = this;\n      setTimeout(function(){ \n        mycall.call();},5000)\n  \n    }\n  });\n\n  } \n\n  //Answercall code ends here\n\n  //check call status code starts here\n  CheckCallStatus(){\n    this.http.get(AppComponent.ApiUrl+\"checkcallstatus.php?call_id=\"+this.callId).subscribe((Cstat)=>{\n      this.Cstat=Cstat;\n      console.log(\"Call Status is:\", this.Cstat);\n      if(this.Cstat !=0){\n        this.Status = this.Cstat[0].status;\n        this.Ans_Status = this.Cstat[0].ans_status;\n        if(this.Ans_Status==1){\n          this.ring.setVolume(0);\n          this.Changeudio();\n        }\n        if(this.Status==2){\n          this.ObservableVar.unsubscribe();\n          this.callend();\n        }\n      }\n    \n\n    });\n   \n  } \nEndCall() {\nthis.callend();\n}\nionViewDidLeave(){\nthis.ObservableVar.unsubscribe();\nthis.http.get(AppComponent.ApiUrl+\"offlinestatus.php?user_id=\"+this.user_id).subscribe(Response =>\n  {\n    console.log(Response);\n  });\n\n}\n}","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CallsContactPage } from './calls-contact.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CallsContactPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CallsContactPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CallsContactPageRoutingModule } from './calls-contact-routing.module';\n\nimport { CallsContactPage } from './calls-contact.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    CallsContactPageRoutingModule\n  ],\n  declarations: [CallsContactPage]\n})\nexport class CallsContactPageModule {}\n","export default \"<ion-header color=\\\"custom\\\" mode=\\\"md\\\">\\n  <ion-toolbar color=\\\"custom\\\" class=\\\"toolbar\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button icon=\\\"chevron-back\\\"></ion-back-button>\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>Your Contact</ion-title>\\n    <ion-row class=\\\"date\\\">\\n      <ion-title>{{cntlength}} Contacts</ion-title>\\n    </ion-row>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-icon name=\\\"search-outline\\\"></ion-icon>\\n      <ion-icon name=\\\"ellipsis-vertical\\\"></ion-icon>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <audio id=\\\"partner-video\\\" (click)=\\\"swapVideo('my-video')\\\" autoplay controls\\n  [ngClass]=\\\"{'top-video': topVideoFrame === 'partner-video', 'main-video': topVideoFrame != 'partner-video'}\\\" style=\\\"display: none;\\\">\\n</audio>\\n<audio id=\\\"my-video\\\" (click)=\\\"swapVideo('partner-video')\\\" autoplay controls muted=\\\"muted\\\"\\n  [ngClass]=\\\"{'top-video': topVideoFrame === 'my-video', 'main-video': topVideoFrame != 'my-video'}\\\" style=\\\"display: none;\\\">\\n</audio>\\n <!--  <ion-grid class=\\\"group\\\">\\n    <ion-row>\\n      <div class=\\\"avatar\\\">\\n        <ion-fab-button color=\\\"light\\\">\\n          <ion-icon name=\\\"people\\\"></ion-icon>\\n        </ion-fab-button>\\n      </div>\\n      <ion-col>\\n        <p>New group call</p>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n  <ion-grid class=\\\"group\\\">\\n    <ion-row>\\n      <div class=\\\"avatar\\\">\\n        <ion-fab-button color=\\\"light\\\">\\n          <ion-icon name=\\\"person-add\\\"></ion-icon>\\n        </ion-fab-button>\\n      </div>\\n      <ion-col>\\n        <p>New Contact</p>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid> -->\\n<div *ngIf= \\\"MianDiv\\\">\\n  <ion-card *ngFor=\\\"let contact of contacts let i=index\\\">\\n    <ion-row>\\n      <div class=\\\"avatar\\\">\\n        <ion-avatar>\\n          <img src=\\\"https://i.pinimg.com/474x/bc/d4/ac/bcd4ac32cc7d3f98b5e54bde37d6b09e.jpg\\\" alt=\\\"\\\">\\n        </ion-avatar>\\n      </div>\\n      <ion-col class=\\\"text-overflow\\\">\\n        <p class=\\\"user-name\\\">{{contact.name}}</p>\\n        <p class=\\\"time\\\">{{contact.city}}</p>\\n      </ion-col>\\n      <ion-col class=\\\"vidicon\\\" size=\\\"2\\\">\\n        <!-- <ion-icon name=\\\"videocam\\\"></ion-icon> -->\\n      </ion-col>\\n      <ion-col class=\\\"callicon\\\" size=\\\"2\\\">\\n        <ion-icon name=\\\"call\\\" (click)=\\\"audiocall(i)\\\"></ion-icon>\\n      </ion-col>\\n    </ion-row>\\n  </ion-card>\\n</div>\\n  <div *ngIf=\\\"AudioDiv\\\" class=\\\"audioDiv\\\">\\n    <h1 class=\\\"bus\\\" style=\\\"margin-top: 70%;\\\">{{partnerId}}</h1>\\n    <h4 class=\\\"calling\\\">Calling</h4>\\n  <ion-grid>\\n   \\n    <ion-row  *ngIf=\\\"outgng\\\" style=\\\"margin-top: 40%; text-align: center;\\\">\\n      <ion-fab-button color=\\\"danger\\\" (click)=\\\"callend()\\\" style=\\\"margin-left: 45%;\\\">\\n        <ion-icon name=\\\"call\\\"></ion-icon>\\n      </ion-fab-button>\\n    </ion-row>\\n    <ion-row *ngIf=\\\"incmng\\\" style=\\\"margin-top: 30%;\\\">\\n      <ion-col size=\\\"1\\\"></ion-col>\\n      <ion-col size=\\\"2\\\" style=\\\"text-align: left !important;\\\">\\n        <ion-button color= \\\"danger\\\" (click)=\\\"callend()\\\" style=\\\"width:50px; height:50px; border-radius: 17px; float: left;\\\">\\n          <ion-icon name=\\\"call\\\"></ion-icon>\\n        </ion-button>\\n      </ion-col>\\n      <ion-col size=\\\"6\\\"></ion-col>\\n      <ion-col size=\\\"2\\\" style=\\\"text-align: right !important;\\\">\\n        <ion-button  color=\\\"success\\\" (click)=\\\"AnsCall()\\\" style=\\\"width:50px; height:50px; border-radius: 17px; float: right;\\\" >\\n          <ion-icon name=\\\"call\\\"></ion-icon>\\n        </ion-button>\\n      </ion-col>\\n      <ion-col size=\\\"1\\\"></ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</div>\\n</ion-content>\";","export default \"ion-content {\\n  --background: linear-gradient(#871178, #3c1378) !important;\\n  color: #ffffff;\\n}\\n\\nion-header ion-icon {\\n  color: #ffffff;\\n  font-size: 21px;\\n}\\n\\nion-title {\\n  font-size: 16px;\\n  color: #ffffff;\\n  padding: 0px;\\n  letter-spacing: 0.6px;\\n}\\n\\n.date ion-title {\\n  font-size: 10px;\\n  margin-top: 7px;\\n  letter-spacing: 0px;\\n  color: #ffffff;\\n}\\n\\nion-content {\\n  --padding-bottom: 65px;\\n  --padding-start: 18px;\\n  --padding-end: 18px;\\n}\\n\\nion-fab-button {\\n  --ion-color-base: linear-gradient(#871178, #3c1378) !important;\\n  --box-shadow: none;\\n}\\n\\nion-fab-button ion-icon {\\n  color: #ffffff;\\n  font-size: 30px;\\n}\\n\\nion-card {\\n  padding: 7px;\\n  padding-left: 10px;\\n  margin: 7px 0px;\\n  box-shadow: 0px 3px 6px #00000029;\\n}\\n\\n.group ion-col {\\n  padding-left: 10px;\\n}\\n\\n.group {\\n  margin-left: 5px;\\n  margin-right: 5px;\\n}\\n\\n.group p {\\n  color: #871178;\\n  font-size: 17px;\\n  font-weight: bold;\\n  padding: 0px;\\n  margin-top: 18px;\\n}\\n\\n.avatar ion-avatar {\\n  width: 56px;\\n  height: 56px;\\n}\\n\\n.user-name {\\n  color: #22272a;\\n  font-size: 18px;\\n  margin: 0px 5px 3px 0px;\\n}\\n\\n.time {\\n  color: #9f9f9f;\\n  font-size: 12px;\\n  margin: 4px 0px 4px 0px;\\n}\\n\\n.callicon {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n\\n.vidicon {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n\\n.callicon ion-icon {\\n  font-size: 22px;\\n}\\n\\n.vidicon ion-icon {\\n  font-size: 22px;\\n}\\n\\n.audioDiv {\\n  text-align: center;\\n  color: #fff;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXGNhbGxzLWNvbnRhY3QucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksMERBQUE7RUFDQSxjQUFBO0FBQ0o7O0FBQ0E7RUFDSSxjQUFBO0VBQ0EsZUFBQTtBQUVKOztBQUFBO0VBQ0ksZUFBQTtFQUNBLGNBQUE7RUFDQSxZQUFBO0VBQ0EscUJBQUE7QUFHSjs7QUFEQTtFQUNJLGVBQUE7RUFDQSxlQUFBO0VBQ0EsbUJBQUE7RUFDQSxjQUFBO0FBSUo7O0FBRkE7RUFDSSxzQkFBQTtFQUNBLHFCQUFBO0VBQ0EsbUJBQUE7QUFLSjs7QUFIQTtFQUNJLDhEQUFBO0VBQ0Esa0JBQUE7QUFNSjs7QUFKQTtFQUNJLGNBQUE7RUFDQSxlQUFBO0FBT0o7O0FBTEE7RUFDSSxZQUFBO0VBQ0Esa0JBQUE7RUFDQSxlQUFBO0VBQ0EsaUNBQUE7QUFRSjs7QUFOQTtFQUNJLGtCQUFBO0FBU0o7O0FBUEE7RUFDSSxnQkFBQTtFQUNBLGlCQUFBO0FBVUo7O0FBUkE7RUFDSSxjQUFBO0VBQ0EsZUFBQTtFQUNBLGlCQUFBO0VBQ0EsWUFBQTtFQUNBLGdCQUFBO0FBV0o7O0FBUkE7RUFDSSxXQUFBO0VBQ0EsWUFBQTtBQVdKOztBQVRBO0VBQ0ksY0FBQTtFQUNBLGVBQUE7RUFDQSx1QkFBQTtBQVlKOztBQVZBO0VBQ0ksY0FBQTtFQUNBLGVBQUE7RUFDQSx1QkFBQTtBQWFKOztBQVZBO0VBQ0ksYUFBQTtFQUNBLHVCQUFBO0VBQ0EsbUJBQUE7QUFhSjs7QUFYQTtFQUNJLGFBQUE7RUFDQSx1QkFBQTtFQUNBLG1CQUFBO0FBY0o7O0FBWkE7RUFDSSxlQUFBO0FBZUo7O0FBYkE7RUFDSSxlQUFBO0FBZ0JKOztBQWJBO0VBQ0ksa0JBQUE7RUFDQSxXQUFBO0FBZ0JKIiwiZmlsZSI6ImNhbGxzLWNvbnRhY3QucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLWNvbnRlbnQge1xyXG4gICAgLS1iYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoIzg3MTE3OCwgIzNjMTM3OCkgIWltcG9ydGFudDtcclxuICAgIGNvbG9yOiAjZmZmZmZmO1xyXG59XHJcbmlvbi1oZWFkZXIgaW9uLWljb24ge1xyXG4gICAgY29sb3I6ICNmZmZmZmY7XHJcbiAgICBmb250LXNpemU6IDIxcHg7XHJcbn1cclxuaW9uLXRpdGxlIHtcclxuICAgIGZvbnQtc2l6ZTogMTZweDtcclxuICAgIGNvbG9yOiAjZmZmZmZmO1xyXG4gICAgcGFkZGluZzogMHB4O1xyXG4gICAgbGV0dGVyLXNwYWNpbmc6IDAuNnB4O1xyXG59XHJcbi5kYXRlIGlvbi10aXRsZSB7XHJcbiAgICBmb250LXNpemU6IDEwcHg7XHJcbiAgICBtYXJnaW4tdG9wOiA3cHg7XHJcbiAgICBsZXR0ZXItc3BhY2luZzogMHB4O1xyXG4gICAgY29sb3I6ICNmZmZmZmY7XHJcbn1cclxuaW9uLWNvbnRlbnQge1xyXG4gICAgLS1wYWRkaW5nLWJvdHRvbTogNjVweDtcclxuICAgIC0tcGFkZGluZy1zdGFydDogMThweDtcclxuICAgIC0tcGFkZGluZy1lbmQ6IDE4cHg7XHJcbn1cclxuaW9uLWZhYi1idXR0b24ge1xyXG4gICAgLS1pb24tY29sb3ItYmFzZTogbGluZWFyLWdyYWRpZW50KCM4NzExNzgsICMzYzEzNzgpICFpbXBvcnRhbnQ7XHJcbiAgICAtLWJveC1zaGFkb3c6IG5vbmU7XHJcbn1cclxuaW9uLWZhYi1idXR0b24gaW9uLWljb24ge1xyXG4gICAgY29sb3I6ICNmZmZmZmY7XHJcbiAgICBmb250LXNpemU6IDMwcHg7XHJcbn1cclxuaW9uLWNhcmQge1xyXG4gICAgcGFkZGluZzogN3B4O1xyXG4gICAgcGFkZGluZy1sZWZ0OiAxMHB4O1xyXG4gICAgbWFyZ2luOiA3cHggMHB4O1xyXG4gICAgYm94LXNoYWRvdzogMHB4IDNweCA2cHggIzAwMDAwMDI5O1xyXG59XHJcbi5ncm91cCBpb24tY29sIHtcclxuICAgIHBhZGRpbmctbGVmdDogMTBweDtcclxufVxyXG4uZ3JvdXAge1xyXG4gICAgbWFyZ2luLWxlZnQ6IDVweDtcclxuICAgIG1hcmdpbi1yaWdodDogNXB4O1xyXG59XHJcbi5ncm91cCBwIHtcclxuICAgIGNvbG9yOiAjODcxMTc4O1xyXG4gICAgZm9udC1zaXplOiAxN3B4O1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgICBwYWRkaW5nOiAwcHg7XHJcbiAgICBtYXJnaW4tdG9wOiAxOHB4O1xyXG59XHJcblxyXG4uYXZhdGFyIGlvbi1hdmF0YXIge1xyXG4gICAgd2lkdGg6IDU2cHg7XHJcbiAgICBoZWlnaHQ6IDU2cHg7XHJcbn1cclxuLnVzZXItbmFtZSB7XHJcbiAgICBjb2xvcjogIzIyMjcyYTtcclxuICAgIGZvbnQtc2l6ZTogMThweDtcclxuICAgIG1hcmdpbjogMHB4IDVweCAzcHggMHB4O1xyXG59XHJcbi50aW1lIHtcclxuICAgIGNvbG9yOiAjOWY5ZjlmO1xyXG4gICAgZm9udC1zaXplOiAxMnB4O1xyXG4gICAgbWFyZ2luOiA0cHggMHB4IDRweCAwcHg7XHJcbn1cclxuXHJcbi5jYWxsaWNvbiB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG59XHJcbi52aWRpY29uIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbn1cclxuLmNhbGxpY29uIGlvbi1pY29uIHtcclxuICAgIGZvbnQtc2l6ZTogMjJweDtcclxufVxyXG4udmlkaWNvbiBpb24taWNvbiB7XHJcbiAgICBmb250LXNpemU6IDIycHg7XHJcbn1cclxuXHJcbi5hdWRpb0RpdiB7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICBjb2xvcjogI2ZmZjtcclxufVxyXG4iXX0= */\";"]}